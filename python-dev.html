<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Faisal Z. Qureshi">
  <meta name="dcterms.date" content="2021-05-19">
  <title>Python development</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="notes-style.css">
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header>
<h1 class="title">Python development</h1>
<p class="subtitle">Local and remote setups</p>
<p class="author">Faisal Z. Qureshi</p>
<p class="institute">Ontario Tech University</p>
<p class="webpage"><a href="http://faculty.uoit.ca/qureshi">http://faculty.uoit.ca/qureshi</a></p>
<p class="date">May 19, 2021</p>
<hr/>
</header>
<h1 id="introduction">Introduction</h1>
<p>This document provides recipies for setting up local or remote Python (and Jupyter notebook) development environments.</p>
<h2 id="using-system-python">Using system Python</h2>
<p>Most systems (linux, windows, mac) come pre-installed with some version of Python. It is possible to use system Python for development; however, it is often a <em>bad</em> idea. Especially so if you are working on two or more Python applications with conflicting dependencies or different Python versions. <em>Do not do this.</em></p>
<h2 id="using-virtualenv-to-create-application-specific-python-environments-systems">Using <code>virtualenv</code> to create application specific Python environments (systems)</h2>
<p>It is better to use <code>virtualenv</code> to set up application specific Python environments. Say I want to develop two Python applications: mars and moon. mars requires Python 2.0 plus <code>numpy</code>; whereas, moon requires Python 3.9 and <code>pandas</code>. It is best to create two different Python environments as follows.</p>
<h3 id="create-python-environment-for-mars">Create Python environment for mars</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> virtualenv <span class="at">-p</span> python2 ~/mars</span></code></pre></div>
<p>The above will create a folder mars in the home directory. This folder will include python2. Now you can activate this environment and install the packages that you need using <code>pip</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> source ~/mars/bin/activate</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">mars</span><span class="kw">)</span> <span class="ex">$</span> pip install numpy</span></code></pre></div>
<p>That’s it. You can use this Python as follows</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">mars</span><span class="kw">)</span> <span class="ex">$</span> python</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Python</span> 2.7.16 <span class="er">(</span><span class="ex">default,</span> Feb 28 2021, 12:34:25<span class="kw">)</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="ex">[GCC</span> Apple LLVM 12.0.5 <span class="er">(</span><span class="ex">clang-1205.0.19.59.6</span><span class="kw">)</span> <span class="ex">[+internal-os,</span> ptrauth-isa=deploy on darwin</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Type</span> <span class="st">&quot;help&quot;</span>, <span class="st">&quot;copyright&quot;</span>, <span class="st">&quot;credits&quot;</span> or <span class="st">&quot;license&quot;</span> for more information.</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span></span></code></pre></div>
<p>When you want to revert to system Python, deactivate the environment.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">mars</span><span class="kw">)</span> <span class="ex">$</span> deactivate</span></code></pre></div>
<h3 id="create-python-environment-for-moon">Create Python environment for moon</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> virtualenv <span class="at">-p</span> python3 ~/moon</span></code></pre></div>
<p>The above will create a folder moon in the home directory. This folder will include Python3. Now you can activate this environment and install the packages that you need using <code>pip</code>. For Python3 it is better to use <code>pip3</code> actually.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> source ~/moon/bin/activate</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">mars</span><span class="kw">)</span> <span class="ex">$</span> pip3 install pandas</span></code></pre></div>
<p>That’s it. You can use this Python as follows</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">moon</span><span class="kw">)</span> <span class="ex">$</span> python</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Python</span> 3.9.4 <span class="er">(</span><span class="ex">default,</span> Apr  5 2021, 01:50:46<span class="kw">)</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="ex">[Clang</span> 12.0.0 <span class="er">(</span><span class="ex">clang-1200.0.32.29</span><span class="kw">)</span><span class="ex">]</span> on darwin</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Type</span> <span class="st">&quot;help&quot;</span>, <span class="st">&quot;copyright&quot;</span>, <span class="st">&quot;credits&quot;</span> or <span class="st">&quot;license&quot;</span> for more information.</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span></span></code></pre></div>
<p>When you want to revert to system Python, deactivate the environment.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">moon</span><span class="kw">)</span> <span class="ex">$</span> deactivate</span></code></pre></div>
<h3 id="some-considerations">Some considerations</h3>
<ol type="1">
<li>Once done with your virtual environment, feel free to nuke the directories.</li>
</ol>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rm <span class="at">-rf</span> ~/mars</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rm <span class="at">-rf</span> ~/moon</span></code></pre></div>
<ol start="2" type="1">
<li><p><code>virtualenv</code> or <code>venv</code> assumes that you have Python X is already installed on your machine. Note that <code>virtualenv</code> doesn’t install Python or pip. Check out OS documentation on how to install Python X and pip. On OSX, I use <code>brew</code>. One Linux, you can use <code>apt-get</code>.</p></li>
<li><p>It is best to use <code>requirements.txt</code> file to specify which Python packages you want to install in a particular environment. To be safe, I often also specify the version numbers for these packages. Consider the following sample <code>requirements.txt</code> file.</p></li>
</ol>
<div class="sourceCode" id="cb10"><pre class="sourceCode txt"><code class="sourceCode default"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>numpy==1.19.0</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>scipy==1.4.0</span></code></pre></div>
<p>Then we can install these packages in an environment, say mars, as follows:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">mars</span><span class="kw">)</span> <span class="ex">$</span> pip install <span class="at">-r</span> requirements.txt</span></code></pre></div>
<ol start="4" type="1">
<li>If you like the current Python environment, and you want to set up a requirements.txt file that you can later use to setup a similar environment, use pip as follows:</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">mars</span><span class="kw">)</span> <span class="ex">$</span> pip freeze <span class="op">&gt;</span> requirements.txt</span></code></pre></div>
<p>Don’t also forget to note down the Python version.</p>
<p><em>Happy hacking!</em></p>
<h2 id="dockerfile-for-setting-up-local-development-environment">Dockerfile for setting up local development environment</h2>
<p>Dockerfile to setting up an image with a <code>dockeruser</code> user. The user has a home directory <code>/home/dockeruser</code>. This image also has a <code>dockeruser</code> group with group id 1010. User <code>dockeruser</code> is a member of this group. Any member of this group has read-write permissions on the home directory. This set up allows us to create and run a container with host users that are also member of the <code>dockeruser</code> group. We can then create files within the container that will appear at mounted host directories to come from valid host users. See the attached docker-compose.yml file that creates and runs the container using host user <span class="math inline">\(UID:\)</span>GID.</p>
<p><strong>Sample Dockerfile</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode txt"><code class="sourceCode default"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>FROM ubuntu:latest</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>ARG DEBIAN_FRONTEND=noninteractive</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>RUN apt-get update &amp;&amp; apt-get -y upgrade</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>RUN apt-get install sqlite3 -y</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>RUN apt-get install -y \</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    build-essential \</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    python3.9 \</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    python3-pip \</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    python-dev \</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    sudo</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>RUN mkdir -p /tmp</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>COPY requirements.txt /tmp/</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>RUN pip3 -q install pip --upgrade</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>RUN pip3 install -r /tmp/requirements.txt</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>RUN groupadd -g 1010 dockeruser</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>RUN useradd -r -m -g 1010 dockeruser </span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>RUN chown -R dockeruser /home/dockeruser</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>RUN chmod -R g+rwx /home/dockeruser</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>USER dockeruser</span></code></pre></div>
<p><strong>Sample docker-compose file</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode txt"><code class="sourceCode default"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>version: &#39;3&#39;</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>services:</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    roadrunner:</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>      build: .</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>      image: test</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>      user: $UID:$GID</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>      working_dir: /home/dockeruser</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>      stdin_open: true</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>      volumes:</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>        - /Users/faisal/Dropbox/coding:/home/dockeruser/coding:rw</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>      tty: true</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>      ports: </span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>        - &quot;8888:8888&quot;</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>      group_add:</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>        - &quot;1010&quot;</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>      environment:</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>        - HOME=&quot;/home/dockeruser&quot;</span></code></pre></div>
<p><strong>Sample requirements.txt file</strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode txt"><code class="sourceCode default"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>jupyterlab==3.0.15</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>numpy==1.20.3</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>scipy==1.6.3</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>matplotlib==3.4.2</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>pandas==1.2.4</span></code></pre></div>
<h3 id="build">Build</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker build <span class="at">-t</span> test .</span></code></pre></div>
<h3 id="create-and-run-container">Create and run container</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> export UID=<span class="va">$(</span><span class="fu">id</span> <span class="at">-u</span> <span class="va">$USER)</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> export GID=<span class="va">$(</span><span class="fu">id</span> <span class="at">-g</span> <span class="va">$USER)</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker-compose <span class="at">-f</span> docker-compose.yml up roadrunner </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="ex">...</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Attaching</span> to docker-test2_roadrunner_1</span></code></pre></div>
<p>Note down the name of the container image returned by docker-compose. In the above case it is <code>docker-test2_roadrunner_1</code></p>
<h3 id="attach">Attach</h3>
<p>Run bash shell</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker exec <span class="at">-it</span> docker-test2_roadrunner_1 bash</span></code></pre></div>
<p>You will be in container prompt now. It may look something like</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">I</span> have no name!@71329da46414:/home/dockeruser$</span></code></pre></div>
<h3 id="a-note-about-host-user-and-container-user">A note about host user and container user</h3>
<p>You can now see your container user information.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">I</span> have no name!@71329da46414:/home/dockeruser$ id</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="va">uid</span><span class="op">=</span>501 <span class="va">gid</span><span class="op">=</span>20<span class="kw">(</span><span class="ex">dialout</span><span class="kw">)</span> <span class="va">groups</span><span class="op">=</span>20<span class="kw">(</span><span class="ex">dialout</span><span class="kw">)</span><span class="ex">,1010</span><span class="er">(</span><span class="ex">dockeruser</span><span class="kw">)</span></span></code></pre></div>
<p>Note that your UID and GID matches those on the host. This means any files that you create within the mounted host directory will have the correct host-user ownership/permissions.</p>
<p>Lets create a file within container</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">I</span> have no name!@71329da46414:/home/dockeruser$ cd coding/</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="ex">I</span> have no name!@71329da46414:/home/dockeruser/coding$ touch boo</span></code></pre></div>
<p>Now lets see its permissions in the host</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-l</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-r--r--@</span>  1 hostuser  hostgroup       0 19 May 08:18 boo</span></code></pre></div>
<p>It works!</p>
<h3 id="run-jupyter-notebook-from-within-container">Run Jupyter Notebook from within container</h3>
<p>Do the following at container prompt</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">I</span> have no name!@71329da46414:/home/dockeruser$ jupyter notebook <span class="at">--ip</span> 0.0.0.0 <span class="at">--port</span> 8888 <span class="at">--no-browser</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="ex">[I</span> 12:21:42.373 NotebookApp] Writing notebook server cookie secret to /home/dockeruser/<span class="st">&quot;/home/dockeruser&quot;</span>/.local/share/jupyter/runtime/notebook_cookie_secret</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="ex">[W</span> 2021-05-19 12:21:43.110 LabApp] <span class="st">&#39;ip&#39;</span> has moved from NotebookApp to ServerApp. This config will be passed to ServerApp. Be sure to update your config before our next release.</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="ex">[W</span> 2021-05-19 12:21:43.110 LabApp] <span class="st">&#39;port&#39;</span> has moved from NotebookApp to ServerApp. This config will be passed to ServerApp. Be sure to update your config before our next release.</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="ex">[W</span> 2021-05-19 12:21:43.110 LabApp] <span class="st">&#39;port&#39;</span> has moved from NotebookApp to ServerApp. This config will be passed to ServerApp. Be sure to update your config before our next release.</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="ex">[W</span> 2021-05-19 12:21:43.110 LabApp] <span class="st">&#39;port&#39;</span> has moved from NotebookApp to ServerApp. This config will be passed to ServerApp. Be sure to update your config before our next release.</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="ex">[I</span> 2021-05-19 12:21:43.119 LabApp] JupyterLab extension loaded from /usr/local/lib/python3.8/dist-packages/jupyterlab</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="ex">[I</span> 2021-05-19 12:21:43.119 LabApp] JupyterLab application directory is /usr/local/share/jupyter/lab</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="ex">[I</span> 12:21:43.124 NotebookApp] Serving notebooks from local directory: /home/dockeruser</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="ex">[I</span> 12:21:43.124 NotebookApp] Jupyter Notebook 6.4.0 is running at:</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="ex">[I</span> 12:21:43.124 NotebookApp] http://71329da46414:8888/<span class="pp">?</span>token=d3f623a50a07e566dd025b1cfdd304c48cdac0407eede6fc</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="ex">[I</span> 12:21:43.124 NotebookApp]  or http://127.0.0.1:8888/<span class="pp">?</span>token=d3f623a50a07e566dd025b1cfdd304c48cdac0407eede6fc</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="ex">[I</span> 12:21:43.124 NotebookApp] Use Control-C to stop this server and shut down all kernels <span class="er">(</span><span class="ex">twice</span> to skip confirmation<span class="kw">)</span><span class="bu">.</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="ex">[C</span> 12:21:43.128 NotebookApp]</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>    <span class="ex">To</span> access the notebook, open this file in a browser:</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>        <span class="ex">file:///home/dockeruser/%22/home/dockeruser%22/.local/share/jupyter/runtime/nbserver-19-open.html</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Or</span> copy and paste one of these URLs:</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>        <span class="ex">http://71329da46414:8888/?token=d3f623a50a07e566dd025b1cfdd304c48cdac0407eede6fc</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>     <span class="ex">or</span> http://127.0.0.1:8888/<span class="pp">?</span>token=d3f623a50a07e566dd025b1cfdd304c48cdac0407eede6fc</span></code></pre></div>
<p>And you can access this notebook via host using the URL provided above.</p>
<h3 id="afterword">Afterword</h3>
<ol type="1">
<li>The jupyter notebook will have access to files in the mounted host folder.</li>
<li>If you create a new notebook, you can save it (a) within container or (b) in the mounted host folder. (a) isn’t persistent. Don’t do that. Do (b). Since the container is run as the host user, the file that you create will have the correct host-user ownership/permission.</li>
</ol>
<p><em>Happy hacking!</em></p>
<h2 id="remote-setups">Remote setups</h2>
<p>Soon you will outgrow your local machine, and you will need access to development servers with better compute and memory resources.</p>
<ol type="1">
<li><p>Ensure that you are able to ssh into the server. I highly recommned setting up key-based ssh-authentication. Check out ssh documentation to see how that can be done.</p></li>
<li><p>Set up Python development environment on the server. Use virualenv or docker as shown above.</p></li>
</ol>
<h3 id="accessing-jupyter-notebook-on-the-remote-server">Accessing jupyter notebook on the remote server</h3>
<ol type="1">
<li><p>Start the jupyter notebook on the remote server. If using virtualenv, you can do the following: <code>jupyter notebook --port 8888 --no-browser</code>. Be sure to write down the URL with authentication token.</p></li>
<li><p>Set up an ssh tunnel to the remote server: <code>ssh user@remote -NL 8888:localhost:8888</code>. This will forward local port 8888 to remote port 8888.</p></li>
<li><p>Use the authentication token in (1) above, connect to the jupyter notebook at the remote host.</p></li>
</ol>
<h3 id="editing-files-on-remote-host">Editing files on remote host</h3>
<p>Gone are the days when you had to telnet into a remote and use vi to edit your code. Modern source code editors such as Visual Studio can access remote files via ssh. It gives you the impression that you are editing these files locally, but actually your changing the files on the remote. The following works for Visual Studio.</p>
<ol type="1">
<li><p>Install the <a href="https://code.visualstudio.com/docs/remote/ssh">Remote Development extension pack</a>.</p></li>
<li><p>Use F1 to connect to ssh.</p></li>
</ol>
<p>This assumes that you are able to ssh into remote using key-authentication and that your ~/.ssh/config file is setup appropriately.</p>
<p><em>Happy hacking!</em></p>
</body>
</html>
